<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="teststyle.css">
</head>
<body>
    <div class="wrapper">
        <div class="screen">
            <div class="PMCenter_panel">
                <div class="PMHeader">
                    <div class="PMHeader_links">
                        <div class="PMHeader_element">P0nya7noGP</div>
                        <div class="PMHeader_element">Настройки</div>
                        <div class="PMHeader_element">Референсы</div>
                    </div>
                    <div class="PMHeader_links">
                        <div class="PMHeader_element">14/13</div>
                        <div class="PMHeader_element">00:05</div>
                    </div>
                </div>
                <div class="PMPanel_inside">
                    <div class="PMPanel_tools">
                        <div class="PMTool PMTool__active"><svg id="Layer_1" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m.024 23.976.076-1.05c.076-1.1.545-6.688 2.307-8.451a5.036 5.036 0 0 1 7.118 7.125c-1.762 1.762-7.349 2.23-8.452 2.306zm23.076-23.108a3.137 3.137 0 0 0 -4.333 0l-10.515 10.519a6.967 6.967 0 0 1 4.342 4.324l10.506-10.511a3.067 3.067 0 0 0 0-4.332z"/></svg></div>
                        <div class="PMTool"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="m7.242,7.438L12.751,1.911c1.17-1.175,3.213-1.175,4.383,0l5.935,5.955c1.206,1.21,1.206,3.179,0,4.389l-5.506,5.525L7.242,7.438Zm7.111,13.562l1.798-1.804L5.83,8.855.882,13.82c-1.206,1.21-1.206,3.179,0,4.389l4.774,4.791h18.344v-2h-9.647Z"/></svg></div>
                        <div class="PMTool"><svg id="Layer_1" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m24 3.023a3 3 0 0 1 -.886 2.138l-3.407 3.407a3.455 3.455 0 0 0 -.071 4.837l-1.436 1.395-9-9 1.4-1.436a3.456 3.456 0 0 0 4.837-.071l3.402-3.407a3.094 3.094 0 0 1 4.276 0 3 3 0 0 1 .885 2.137zm-22.087 14.658a3.074 3.074 0 0 0 -.582 3.574l-1.331 1.331 1.414 1.414 1.331-1.331a3.074 3.074 0 0 0 3.574-.582l8.049-8.049-4.406-4.406z"/></svg></div>
                        <div class="PMTool"><svg id="Layer_1" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg" data-name="Layer 1"><path d="m21.45 13.864-9.258 9.257a3 3 0 0 1 -4.243 0l-7.07-7.071a3 3 0 0 1 0-4.242l6.3-6.3-2.861-2.886 1.422-1.406 8.969 9.08 1.537-1.526-6.125-6.2.015-.016-1.1-1.1 1.415-1.417 13.577 13.576-1.415 1.415zm-2.45 7.636a2.5 2.5 0 0 0 5 0c0-1.381-2.5-4.5-2.5-4.5s-2.5 3.25-2.5 4.5z"/></svg></div>
                        <div class="PMTool"><svg xmlns="http://www.w3.org/2000/svg" id="Isolation_Mode" data-name="Isolation Mode" viewBox="0 0 24 24" width="512" height="512"><path d="M24,24H0V0H24ZM3,21H21V3H3Z"/></svg></div>
                        <div class="PMTool"><svg xmlns="http://www.w3.org/2000/svg" id="Bold" viewBox="0 0 24 24" width="512" height="512"><path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,21a9,9,0,1,1,9-9A9.01,9.01,0,0,1,12,21Z"/></svg></div>
                        <div class="PMTool"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Z"/></svg></div>
                    </div>
                </div>
                <div class="PMFooter">
                    <span>
                        <div class="PMFooter_element">ZOOM: 100%</div>
                        <div class="PMFooter_element">1516px. X 848px. (300ppi)</div>
                    </span>
                    <button class="PMRender__button">Экспортировать</button>
                </div>
            </div>
            <div class="PMRight_panel">
                <div class="PMPanel">
                    <div class="PMPanel_header">
                        <div class="PMPTitle PMPanel__active">Палитра</div>
                    </div>
                    <div class="PMPanel_main_holder">
                        <div class="PMPanel_hero PMColor">
                            <div class="PMFast_color_holder">
                                <div class="PMFast__color">+</div>
                                <div class="PMFast__color"></div>
                            </div>
                            <canvas class="PMPalette"></canvas>
                            <canvas class="PMPalette_hue"></canvas>
                        </div>
                    </div>
                </div>
                <div class="PMPanel">
                    <div class="PMPanel_header">
                        <div class="PMPTitle PMPanel__active">Сохраненные цвета</div>
                    </div>
                    <div class="PMPanel_main_holder">
                        <div class="PMPanel_hero PMColorPresets">
                            <div class="PMColor_save" style="background-color: rgb(0, 0, 0)"></div>
                            <div class="PMColor_save" style="background-color: rgb(255, 255, 255)"></div>
                            <div class="PMColor_save" style="background-color: rgb(255, 0, 0)"></div>
                            <div class="PMColor_save" style="background-color: rgb(0, 255, 0)"></div>
                            <div class="PMColor_save" style="background-color: rgb(0, 0, 255)"></div>

                        </div>
                    </div>
                </div>
                <div class="PMPanel">
                    <div class="PMPanel_header">
                        <div class="PMPTitle PMPanel__active">Кисть</div>
                        <div class="PMPTitle">Пресеты</div>
                    </div>
                    <div class="PMPanel_main_holder">
                        <div class="PMPanel_hero" id="brushSettingsHolder">
                            <div class="PMBrush_setting_holder">
                                <div class="PMBrush_setting_title">
                                    Размер:
                                    <input type="value" id="brushRadiusInput" min="1" value="4">
                                </div>
                                <input type="range" id="brushRadiusValue" min="1" value="4">
                            </div>
                            <div class="PMBrush_setting_holder">
                                <div class="PMBrush_setting_title">
                                    Непрозрачность:
                                    <input type="value" id="brushTransparencyInput" min="1" value="100">
                                </div>
                                <input type="range" id="brushTransparencyValue" min="1" value="100">
                            </div>
                        </div>
                        <div class="PMPanel_hero PMPanel_hero__active" id="brushSettingsHolder">
                            <div class="PMBrush_setting_holder">
                                <div class="PMBrush_setting_title">
                                    Размер:
                                    <input type="value" id="brushRadiusInput" min="1" value="4">
                                </div>
                                <input type="range" id="brushRadiusValue" min="1" value="4">
                            </div>
                            <div class="PMBrush_setting_holder">
                                <div class="PMBrush_setting_title">
                                    Непрозрачность:
                                    <input type="value" id="brushTransparencyInput" min="1" value="100">
                                </div>
                                <input type="range" id="brushTransparencyValue" min="1" value="100">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="PMPanel">
                    <div class="PMPanel_header">
                        <div class="PMPTitle PMPanel__active">Слои</div>
                    </div>
                    <div class="PMPanel_main_holder">
                        <div class="PMPanel_hero">
                            <div class="PMLayer_holder">
                                <div class="PMLayer">
                                    <div class="PMLayer__hide PMLayer_button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><g id="_01_align_center" data-name="01 align center"><path d="M23.821,11.181v0C22.943,9.261,19.5,3,12,3S1.057,9.261.179,11.181a1.969,1.969,0,0,0,0,1.64C1.057,14.739,4.5,21,12,21s10.943-6.261,11.821-8.181A1.968,1.968,0,0,0,23.821,11.181ZM12,19c-6.307,0-9.25-5.366-10-6.989C2.75,10.366,5.693,5,12,5c6.292,0,9.236,5.343,10,7C21.236,13.657,18.292,19,12,19Z"/><path d="M12,7a5,5,0,1,0,5,5A5.006,5.006,0,0,0,12,7Zm0,8a3,3,0,1,1,3-3A3,3,0,0,1,12,15Z"/></g></svg>
                                    </div>
                                    <input class="PMLayer__title" type="text" placeholder="Безымянный слой">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="PMLayer_holder_footer">
                        <div class="PMLayer_button"><svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="512" height="512"><path d="M24,9.367v2.332l-12,7.2L0,11.7v-2.332l12,7.2,12-7.2Zm-.056-2.137L12,.064,.056,7.23l11.944,7.166,11.944-7.166ZM0,13.699v2.332l12,7.2,2-1.2v-2.332l-2,1.2L0,13.699Zm21,2.301h-2v3h-3v2h3v3h2v-3h3v-2h-3v-3Z"/></svg></div>
                        <div class="PMLayer_button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="512" height="512"><g id="_01_align_center" data-name="01 align center"><path d="M22,4H17V2a2,2,0,0,0-2-2H9A2,2,0,0,0,7,2V4H2V6H4V21a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V6h2ZM9,2h6V4H9Zm9,19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V6H18Z"/><rect x="9" y="10" width="2" height="8"/><rect x="13" y="10" width="2" height="8"/></g></svg></div>
                    </div>
                </div>
            </div>
            <div class="PMReady__overlay"></div>
        </div>
    </div>
    <script>


        function renderPalette(color) {
            let palette = document.querySelector(".PMPalette")
            paletteContext = palette.getContext("2d")

            paletteContext.clearRect(0,0,paletteContext.canvas.width, paletteContext.canvas.height)

            let gradientH = paletteContext .createLinearGradient(0, 0, paletteContext.canvas.width, 0);
            gradientH.addColorStop(0, '#fff');
            gradientH.addColorStop(1, color);
            paletteContext .fillStyle = gradientH;
            paletteContext .fillRect(0, 0, paletteContext .canvas.width, paletteContext.canvas.height);
        
            let gradientV = paletteContext.createLinearGradient(0,0,0,paletteContext.canvas.height)
            gradientV.addColorStop(0, 'rgba(0,0,0,0)');
            gradientV.addColorStop(1, '#000000');
            paletteContext.fillStyle = gradientV;
            paletteContext.fillRect(0, 0, paletteContext.canvas.width, 
            paletteContext.canvas.height); 
        }
        
        renderPalette("#ff0000")

        let paletteHue = document.querySelector(".PMPalette_hue")
        let hueContext = paletteHue.getContext("2d")
        hueContext.canvas.height = 250
        let hue = hueContext.createLinearGradient(0,0,0,hueContext.canvas.height)
        hue.addColorStop(0,"#ff0000")
        hue.addColorStop(0.16,"#ff00ff")
        hue.addColorStop(0.32,"#0000ff")
        hue.addColorStop(0.48,"#00ffff")
        hue.addColorStop(0.64,"#00ff00")
        hue.addColorStop(0.80,"#ffff00")
        hue.addColorStop(1,"#ff0000")
        hueContext.fillStyle = hue
        hueContext.fillRect(0,0, hueContext.canvas.width, hueContext.canvas.height)
    
        paletteHue.addEventListener("click", (event)=>{

            let pixel = hueContext.getImageData(
                15, 
                (event.clientY - paletteHue.getBoundingClientRect().top),
                1,
                1
            )['data']
            let rgb = `rgb(${pixel[0]},${pixel[1]},${pixel[2]})`
            color = rgb
            console.log(hueContext.canvas.width, hueContext.canvas.height);
            renderPalette(rgb)

        })
    </script>

    <div class="PMInfo_panel">
        <span class="PMInfo__title"></span>
        <span class="PMInfo__text"></span>
        <div class="PMInfo__timer"></div>
    </div>

</body>
</html>